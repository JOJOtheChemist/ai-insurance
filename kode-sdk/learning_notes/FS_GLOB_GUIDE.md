# fs_glob 工具使用指南

`fs_glob` 是一个用于文件系统探索的工具。它允许你使用 Glob 通配符模式来查找文件路径，类似于在命令行中使用 `ls` 配合通配符，或者 `find` 命令。

## 1. 核心功能

与 `fs_grep` 不同，**`fs_glob` 不关心文件内容，只关心文件名和路径**。

它的主要作用是：
1.  **探索目录结构**：看看某个目录下有哪些文件。
2.  **批量定位文件**：找到所有特定后缀（如 `.ts`）或特定命名规则的文件。
3.  **获取文件列表**：为后续的批量操作（如批量读取或编辑）提供文件路径清单。

## 2. 什么是 Glob 模式？

Glob 是一种用于匹配路径的模式匹配语法，非常直观：

*   `*`：匹配任意数量的字符（不包括路径分隔符 `/`）。
    *   例如 `*.ts` 匹配 `index.ts`，但不匹配 `utils/index.ts`。
*   `**`：匹配任意数量的字符，**包括**路径分隔符（递归匹配）。
    *   例如 `src/**/*.ts` 匹配 `src` 目录下（包括所有子目录）的所有 `.ts` 文件。
*   `?`：匹配单个字符。
    *   例如 `test-?.ts` 匹配 `test-1.ts`，但不匹配 `test-10.ts`。
*   `{a,b}`：匹配 a 或 b。
    *   例如 `src/**/*.{css,scss}` 匹配 CSS 和 SCSS 文件。

## 3. 参数说明

| 参数名 | 类型 | 必填 | 说明 |
| :--- | :--- | :--- | :--- |
| `pattern` | string | **是** | Glob 匹配模式。例如 `"src/**/*.ts"`。 |
| `cwd` | string | 否 | 基准目录（Current Working Directory）。默认为沙箱根目录。如果设置了，搜索将从该目录开始。 |
| `dot` | boolean | 否 | 是否匹配以点（`.`）开头的隐藏文件（如 `.env`, `.gitignore`）。默认为 `false`。 |
| `limit` | number | 否 | 最大返回结果数量。默认为 200。用于防止返回成千上万个文件导致上下文溢出。 |

## 4. 使用示例

### 4.1 列出项目根目录下的所有文件（非递归）
```json
{
  "pattern": "*"
}
```

### 4.2 递归查找 src 目录下的所有 TypeScript 文件
```json
{
  "pattern": "src/**/*.ts"
}
```

### 4.3 查找所有配置文件（包含隐藏文件）
```json
{
  "pattern": "**/*.{json,yaml,yml,conf}",
  "dot": true
}
```

### 4.4 在特定目录下搜索
假设你想看 `src/tools/` 下有哪些子目录：
```json
{
  "pattern": "*",
  "cwd": "src/tools"
}
```

## 5. fs_glob vs fs_grep

| 特性 | fs_glob | fs_grep |
| :--- | :--- | :--- |
| **搜索对象** | **文件名 / 路径** | **文件内容** |
| **是否读取文件** | 否（只读元数据） | 是（读取全部内容） |
| **性能** | 极快 | 较慢（取决于文件大小和数量） |
| **用途** | "我想知道有哪些文件" | "我想知道这行代码在哪" |
| **典型场景** | 列出所有 `.log` 文件 | 查找 "Error: connection failed" |

## 6. 最佳实践

1.  **避免过于宽泛的搜索**：尽量不要直接搜 `**/*`（全盘扫描），这可能会返回大量无关文件（如 `node_modules` 里的文件）。
2.  **配合使用**：通常先用 `fs_glob` 确认文件结构，拿到文件列表后，再决定用 `fs_read` 读取具体文件，或者用 `fs_grep` 深入搜索内容。
3.  **注意 `limit`**：如果你预期结果很多，请注意返回结果中的 `truncated: true` 标志，这说明还有更多文件没显示出来。
