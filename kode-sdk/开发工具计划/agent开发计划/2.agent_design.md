# 保险销售辅助 Agent 设计方案 (智能卡片版)

**版本**: v1.1
**目标**: 打造一个专业、谨慎、数据驱动的保险销售助手，帮助销售人员准确识别客户风险，利用 SDK 工具集推荐合适产品，并通过智能 UI 引导完成销售闭环。

## 1. 核心定位 (Persona)

*   **角色**: 资深保险规划师 + 产品数据库专家
*   **性格**: 专业、客观、谨慎、有同理心
*   **原则**:
    1.  **需求为先**: 不卖“最贵”，只卖“最对”。必须先通过对话明确需求（Budget, Risk Gap）再推荐。
    2.  **条款为据**: 所有推荐理由必须基于 `inspect` 或 `search` 查到的真实条款，杜绝胡编乱造。
    3.  **风险导向**: 主动挖掘用户未意识到的风险（如：有了重疾是否缺医疗？有了意外是否缺定寿？）。

## 2. 交互逻辑架构 (The Interaction Loop)

Agent 的每一次回复不仅仅是文本，还包含**UI 引导数据**。

### 标准输出结构
```json
{
  "thought": "分析用户当前状态，决定下一步策略...",
  "message": "Agent 的自然语言回复（话术引导）...",
  "tool_calls": ["..."],
  "ui_suggestions": {
    "quick_replies": ["..."], // 用户可能点击的回答
    "follow_up_prompts": ["..."] // 下一步引导
  },
  "cards": [ // [NEW] 智能卡片（可选，按需生成）
    {
      "type": "analysis_card", // 情况分析卡片
      "title": "用户风险画像",
      "content": {
        "tags": ["30岁", "家庭支柱", "颈椎风险"],
        "risk_gap": "重疾保障缺失，目前仅有社保",
        "budget_analysis": "预算充足（1万/年），可配置高端医疗"
      }
    },
    {
      "type": "pitch_card", // 话术/推荐卡片
      "title": "针对性促单话术",
      "content": "您担心的续保问题，这款产品正好有'保证续保20年'的条款（见条款2.1），这是市面上少有的亮点...",
      "highlight_tags": ["保证续保", "无理赔优惠"]
    }
  ]
}
```

### 触发机制 (Triggers)
*   **分析卡片生成时机**: 当收集完 profile 信息（如年龄、职业、预算），进入推荐阶段前。
*   **话术卡片生成时机**: 当用户表现出犹豫（"我再想想"、"有点贵"）或提出具体异议时。

## 3. 交互阶段拆解 (Stages)

#### 阶段一：画像构建与风险假设 (Profiling & Hypothesis)
*   **场景**: 用户刚开始对话，信息模糊。
*   **Agent 动作**:
    1.  提取已知标签 (年龄, 职业, 家庭结构)。
    2.  **假设风险**: "30岁程序员 -> 熬夜多/颈椎病 -> 关注猝死/重疾/医疗"。
    3.  **UI 引导**:
        *   `quick_replies`: ["预算 5000/年", "预算 1万/年", "注重性价比", "大品牌优先"]
        *   `follow_up_prompts`: ["既然是家庭支柱，是否需要考虑定寿？", "我有社保，还需要买医疗险吗？"]

#### 阶段二：需求确认与工具调用 (Discovery & Tools)
*   **场景**: 用户表达了初步意向（e.g., "想买个重疾"）。
*   **Agent 动作**:
    1.  使用 `insurance_filter` 初筛产品池。
    2.  如果用户提到特定病种（如“甲状腺结节”），使用 `insurance_search` 确认核保友好度或覆盖情况。
    3.  **UI 引导**:
        *   `quick_replies`: ["只保重疾", "含身故责任", "保终身", "保70岁"]

#### 阶段三：产品推荐与条款验证 (Recommendation & Proof)
*   **场景**: 锁定 2-3 款产品进行提案。
*   **Agent 动作**:
    1.  使用 `insurance_inspect` 拉取产品核心优势 (`highlights`) 和特定条款 (`coverage`)。
    2.  生成**推荐语**: "推荐产品 A，因为它的 [特定医疗] 包含了您关心的进口药报销..."
    3.  **UI 引导**:
        *   `follow_up_prompts`: ["这就下单", "这款产品的等待期是多久？", "对比一下另一款 B 产品"]

## 4. 工具使用策略 (Tool Strategy)

| 用户行为 | Agent 思考 | 调用工具 | 目的 |
| :--- | :--- | :--- | :--- |
| "我想给5岁孩子买保险" | 需要先圈定儿童适用的产品范围 | `insurance_filter(age_min=5, age_max=5)` | 初筛 |
| "这产品保不保白血病？" | 需要查阅具体条款或扩展信息 | `insurance_search("白血病")` 或 `inspect(id, field="extend_info")` | 确证 |
| "这个比那个好在哪？" | 需要获取两者的核心差异 | `inspect(id1, view="summary")` + `inspect(id2)` | 对比 |
| "我预算只有 2000" | 重新筛选高性价比产品 | `insurance_search("性价比")` 或 `filter(type="医疗险")` (转而推荐百万医疗) | 调整方案 |
