AI 保险顾问检索系统开发计划
本计划旨在构建一套基于 PostgreSQL 的高级检索系统，并将其集成到 AI Agent 中。
📍 目录结构
所有测试脚本和相关文档将存放于 search_system_dev/ 目录。
***Phase 1: 后端 API 开发 (Backend)
目标: 在 FastAPI 后端实现支持模糊搜索、JSON 穿透查询和数值过滤的 API。
API 设计: 确定 search, inspect, filter 三个核心接口的参数与返回结构。
数据库配置:
安装 pg_trgm 扩展。
为 extend_info (JSON) 和 description 创建 GIN 索引。
接口实现 (backend/main.py):
/api/tools/search: 全文检索 + JSON 文本检索 + 智能摘要。
/api/tools/inspect: 指定字段查询 + JSON Key 路径提取。
/api/tools/filter: 数值范围 (age_min/max) 与类型筛选。
接口验证:
编写全面的测试脚本 test_backend_api.sh 并存放于本目录。
验证所有边界条件（如空结果、非法参数、JSON 字段不存在等）。
Phase 2: 工具定义 (Kode SDK)
创建工具文件:
src/tools/insurance_search/index.ts
src/tools/insurance_inspect/index.ts
src/tools/insurance_filter/index.ts
实现工具逻辑:
使用 fetch 或 axios 调用后端 API。
定义 Zod Schema (输入参数验证)。
编写 Prompt Description (告诉 AI 什么时候用)。
注册工具: 在 src/tools/builtin.ts 或 registry.ts 中注册新工具。
Phase 3: 集成与测试
目标: 验证 Agent 能否正确理解并调用这些工具。
集成测试:
模拟 Agent 调用场景（“帮我找个保猝死的保险”）。
验证上下文消耗（检查是否只返回了摘要而非全文）。
Prompt 调优: 如果 Agent 乱用工具，调整 System Prompt。
***📝 执行记录
2025-12-16
初始化开发计划。
后端 API 代码已初步实现，待迁移测试脚本并进行详细验证。