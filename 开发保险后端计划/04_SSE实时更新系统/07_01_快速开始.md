# ğŸš€ å¿«é€Ÿå¼€å§‹ - é€šç”¨SSEå®¢æˆ·ä¿¡æ¯æ›´æ–°ç³»ç»Ÿ

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### åç«¯å®ç°
- âœ… SSEåŸºç¡€è®¾æ–½ (`sse_manager.py`, `sse_notifier.py`)
- âœ… å®¢æˆ·ä¿¡æ¯APIç«¯ç‚¹ (`GET /api/v1/clients/session/{session_id}`, `GET /api/v1/clients/sse/{session_id}`)
- âœ… update_intelligence APIè‡ªåŠ¨å‘é€SSEé€šçŸ¥
- âœ… ä¾èµ–å·²æ·»åŠ åˆ° `backend/requirements.txt`

### å‰ç«¯å®ç°
- âœ… SSEç›‘å¬Hook (`useClientSSE.ts`)
- âœ… å®¢æˆ·ä¿¡æ¯APIæœåŠ¡ (`clientApi.ts`)
- âœ… èŠå¤©ç»„ä»¶SSEé›†æˆ (`CompositeDigitalHumanChat.tsx`)

---

## ğŸ“¦ å®‰è£…æ­¥éª¤

### 1. å®‰è£…åç«¯ä¾èµ–
```bash
cd insurance-product-backend/backend
pip install -r requirements.txt
```

### 2. é‡å¯åç«¯æœåŠ¡
```bash
# æ–¹æ³•1: å¦‚æœä½¿ç”¨PM2
pm2 restart insurance-api

# æ–¹æ³•2: æ‰‹åŠ¨é‡å¯
pkill -f "uvicorn.*8080"
cd backend
uvicorn main:app --host 0.0.0.0 --port 8080 --reload
```

### 3. å¯åŠ¨å‰ç«¯ï¼ˆå¦‚æœæœªè¿è¡Œï¼‰
```bash
cd react-app
npm start
```

---

## ğŸ§ª å¿«é€Ÿæµ‹è¯•

### æµ‹è¯•åœºæ™¯: AIæ›´æ–°å®¢æˆ·ä¿¡æ¯
1. æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°ï¼ˆF12 â†’ Consoleï¼‰
2. è®¿é—® http://localhost:3000
3. å‘é€æ¶ˆæ¯ï¼š"æˆ‘å«ç‹å®å¼ºï¼Œä»Šå¹´30å²"
4. ç­‰å¾…AIå›å¤
5. å†å‘é€ï¼š"å…¶å®æˆ‘35å²"

### é¢„æœŸç»“æœ
Consoleåº”è¯¥æ˜¾ç¤ºï¼š
```
ğŸ”— [Client SSE] æ­£åœ¨è¿æ¥: /api/v1/clients/sse/session-xxx
âœ… [Client SSE] è¿æ¥æˆåŠŸ
ğŸ’“ [Client SSE] å¿ƒè·³åŒ…
ğŸ“© [Client SSE] æ”¶åˆ°æ¶ˆæ¯: {type: "client_updated", client_id: 1}
ğŸ”„ [Client SSE] å®¢æˆ·ä¿¡æ¯æ›´æ–°ï¼Œè§¦å‘å›è°ƒ...
ğŸ“Š [Client Data] åŠ è½½å®¢æˆ·ä¿¡æ¯: {name: "ç‹å®å¼º", age: 35, ...}
```

ç•Œé¢åº”è¯¥ï¼š
- âœ… å³ä¸Šè§’æ˜¾ç¤ºå®¢æˆ·å¡ç‰‡
- âœ… å¹´é¾„è‡ªåŠ¨ä»30æ›´æ–°ä¸º35
- âœ… **æ— éœ€åˆ·æ–°é¡µé¢**

---

## ğŸ¯ æ ¸å¿ƒä¼˜åŠ¿

### é€šç”¨æ€§
- ä»»ä½•æ›´æ–°å®¢æˆ·ä¿¡æ¯çš„APIéƒ½ä¼šè‡ªåŠ¨è§¦å‘SSEé€šçŸ¥
- å‰ç«¯ç»Ÿä¸€ç›‘å¬ï¼Œæ— éœ€ä¸ºæ¯ä¸ªå·¥å…·å•ç‹¬ç¼–å†™é€»è¾‘

### å¯é æ€§
- è‡ªåŠ¨é‡è¿æœºåˆ¶ï¼ˆæœ€å¤š5æ¬¡ï¼‰
- é¡µé¢å¯è§æ€§æ£€æµ‹ï¼ˆåˆ‡æ¢tabè‡ªåŠ¨æ–­å¼€/é‡è¿ï¼‰
- å¿ƒè·³åŒ…ä¿æŒè¿æ¥æ´»è·ƒ

### æ•°æ®ä¸€è‡´æ€§
- å•ä¸€çœŸå®æ•°æ®æºï¼ˆPostgreSQLæ•°æ®åº“ï¼‰
- APIè¯»å–ç¡®ä¿å‰ç«¯æ˜¾ç¤ºä¸æ•°æ®åº“åŒæ­¥

---

## ğŸ” æ•…éšœæ’æŸ¥

### Consoleæ˜¾ç¤º"SSEè¿æ¥å¤±è´¥"
**æ£€æŸ¥**: åç«¯æ˜¯å¦æ­£å¸¸è¿è¡Œï¼Ÿ  
**æµ‹è¯•**: `curl http://localhost:8080/api/v1/clients/sse/test-session`

### æ›´æ–°åUIä¸åˆ·æ–°
**æ£€æŸ¥**: 
1. Networkæ ‡ç­¾æ˜¯å¦æœ‰SSEè¿æ¥ï¼Ÿ
2. åç«¯æ—¥å¿—æ˜¯å¦æœ‰ `ğŸ“¢ [SSE] å·²å‘é€å®¢æˆ·ä¿¡æ¯æ›´æ–°é€šçŸ¥`ï¼Ÿ

---

æŸ¥çœ‹å®Œæ•´æ–‡æ¡£: [07_02_SSEå®ç°è¯¦è§£.md](./07_02_SSEå®ç°è¯¦è§£.md)
