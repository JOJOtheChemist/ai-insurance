<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIä¿å…¸ - é€šç”¨äº§å“è¯¦æƒ…æ¸²æŸ“å¼•æ“</title>
    <style>
        :root {
            /* åŠ¨æ€ä¸»é¢˜è‰²ï¼Œå°†ç”±JSæ§åˆ¶ */
            --primary-color: #D31145; 
            --secondary-color: #1A1A1A;
            --accent-color: #C69C6D;
            --bg-light: #F9FAFB;
            --text-gray: #666;
            --border-radius: 12px;
            --shadow: 0 4px 20px rgba(0,0,0,0.08);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }

        body {
            background-color: var(--bg-light);
            color: var(--secondary-color);
            line-height: 1.6;
            padding-bottom: 80px;
        }

        /* é¡¶éƒ¨æ¨¡æ‹Ÿå¯¼èˆªæ  */
        .mock-nav {
            background: #fff;
            padding: 10px 20px;
            overflow-x: auto;
            white-space: nowrap;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 1000;
            display: flex;
            gap: 10px;
        }

        .nav-btn {
            padding: 6px 15px;
            border-radius: 20px;
            border: 1px solid #eee;
            background: #f5f5f5;
            cursor: pointer;
            font-size: 13px;
            transition: all 0.3s;
        }

        .nav-btn.active {
            background: #333;
            color: #fff;
            border-color: #333;
        }

        /* å¤´éƒ¨è®¾è®¡ */
        .header {
            background: linear-gradient(135deg, var(--secondary-color) 0%, #2c2c2c 100%);
            color: white;
            padding: 40px 20px;
            position: relative;
            overflow: hidden;
            transition: background 0.5s;
        }

        .header::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(0,0,0,0) 70%);
            border-radius: 50%;
        }

        .tag {
            background-color: var(--primary-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            display: inline-block;
            margin-bottom: 12px;
            text-transform: uppercase;
        }

        .product-title {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .company-name {
            font-size: 14px;
            opacity: 0.8;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .product-desc {
            font-size: 15px;
            color: rgba(255,255,255,0.8);
            max-width: 600px;
        }

        /* æ ¸å¿ƒæ•°æ®å¡ç‰‡ */
        .metrics-container {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .metric-card {
            flex: 1;
            min-width: 130px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 15px;
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .metric-value {
            font-size: 20px;
            font-weight: 700;
            color: var(--accent-color);
        }

        .metric-label {
            font-size: 12px;
            color: rgba(255,255,255,0.6);
            margin-top: 4px;
        }

        /* ä¸»ä½“å†…å®¹ */
        .container {
            max-width: 800px;
            margin: -20px auto 0;
            padding: 0 20px;
            position: relative;
            z-index: 10;
        }

        .section {
            background: white;
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            display: none; /* é»˜è®¤éšè—ï¼Œæœ‰æ•°æ®æ‰æ˜¾ç¤º */
        }

        .section.has-data {
            display: block;
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            color: var(--secondary-color);
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 18px;
            background-color: var(--primary-color);
            margin-right: 10px;
            border-radius: 2px;
        }

        /* æ ‡ç­¾åˆ—è¡¨ */
        .tags-list {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .info-tag {
            background-color: #F3F4F6;
            color: #4B5563;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 13px;
        }

        /* æŠ•ä¿è§„åˆ™ç½‘æ ¼ */
        .rules-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .rule-item h4 {
            font-size: 13px;
            color: var(--text-gray);
            margin-bottom: 4px;
        }

        .rule-item p {
            font-size: 15px;
            font-weight: 600;
            color: var(--secondary-color);
        }

        /* ä¿éšœèŒƒå›´åˆ—è¡¨ */
        .coverage-list {
            list-style: none;
        }

        .coverage-item {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            padding: 15px 0;
            border-bottom: 1px solid #eee;
        }

        .coverage-item:last-child {
            border-bottom: none;
        }

        .coverage-icon {
            width: 40px;
            height: 40px;
            background-color: #FFF5F7;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            flex-shrink: 0;
            color: var(--primary-color);
            font-size: 18px;
        }

        .coverage-content {
            flex: 1;
        }

        .coverage-title {
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 4px;
        }

        .coverage-desc {
            font-size: 13px;
            color: var(--text-gray);
        }

        .coverage-amount {
            font-weight: 700;
            color: var(--primary-color);
            font-size: 15px;
            margin-left: 10px;
            white-space: nowrap;
        }

        /* è´£ä»»å…é™¤ */
        .exclusion-box {
            background-color: #FFF9FA;
            border: 1px dashed #FCC;
            border-radius: 8px;
            padding: 15px;
            font-size: 13px;
            color: #666;
        }

        .exclusion-box ul {
            padding-left: 20px;
            margin-top: 10px;
        }
        
        /* åŠ¨æ€è¡¨æ ¼ */
        .dynamic-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }
        
        .dynamic-table th, .dynamic-table td {
            padding: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .dynamic-table th {
            text-align: left;
            background: #eee;
            font-weight: 600;
        }

        /* è‡ªå®šä¹‰ Tooltip æ ·å¼ */
        .tooltip-container {
            position: relative;
            display: inline-block;
            margin-left: 4px;
        }

        .tooltip-icon {
            font-size: 12px;
            cursor: pointer;
            color: #999;
            border: 1px solid #ddd;
            border-radius: 50%;
            width: 14px;
            height: 14px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            line-height: 1;
        }

        .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 100;
            bottom: 125%; /* Position above */
            left: 50%;
            margin-left: -100px;
            opacity: 0;
            transition: opacity 0.2s;
            font-size: 12px;
            font-weight: normal;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }

        .tooltip-text::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #333 transparent transparent transparent;
        }

        /* Hover å’Œ Active (ç‚¹å‡») æ—¶æ˜¾ç¤º */
        .tooltip-container:hover .tooltip-text,
        .tooltip-container:active .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* åº•éƒ¨æ“ä½œæ  */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            background: white;
            padding: 15px 20px;
            box-shadow: 0 -2px 10px rgba(0,0,0,0.05);
            display: flex;
            gap: 15px;
            z-index: 100;
        }

        .btn {
            flex: 1;
            padding: 12px;
            border-radius: 25px;
            border: none;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            text-align: center;
        }

        .btn-outline {
            background: white;
            border: 1px solid #ddd;
            color: #333;
        }

        .btn-primary {
            background: var(--primary-color);
            color: white;
            box-shadow: 0 4px 10px rgba(0,0,0, 0.2);
        }

        @media (min-width: 768px) {
            .rules-grid {
                grid-template-columns: repeat(4, 1fr);
            }
            .header {
                padding: 60px 40px;
                text-align: center;
            }
            .metrics-container {
                justify-content: center;
            }
            .product-desc {
                margin: 0 auto;
            }
            .bottom-nav {
                justify-content: center;
            }
            .bottom-nav .btn {
                max-width: 200px;
            }
        }
    </style>
</head>
<body>

    <!-- æ¨¡æ‹Ÿå¯¼èˆªï¼šåˆ‡æ¢ä¸åŒäº§å“æ•°æ® -->
    <div class="mock-nav" id="navContainer">
        <!-- JS è‡ªåŠ¨å¡«å…… -->
    </div>

    <!-- é¡¶éƒ¨å±•ç¤ºåŒº -->
    <header class="header" id="headerSection">
        <div class="tag" id="productType">äº§å“ç±»å‹</div>
        <h1 class="product-title" id="productName">åŠ è½½ä¸­...</h1>
        <div class="company-name">ğŸ›¡ï¸ <span id="companyName">--</span></div>
        <p class="product-desc" id="productDesc">--</p>

        <!-- å…³é”®æŒ‡æ ‡ - åŠ¨æ€ç”Ÿæˆ -->
        <div class="metrics-container" id="highlightsContainer"></div>
    </header>

    <div class="container">
        <!-- äº§å“æ ‡ç­¾ -->
        <div class="section has-data">
            <div class="tags-list" id="tagsContainer"></div>
        </div>

        <!-- æŠ•ä¿è§„åˆ™ -->
        <div class="section has-data">
            <h3 class="section-title">æŠ•ä¿è§„åˆ™</h3>
            <div class="rules-grid" id="rulesContainer">
                <!-- åŠ¨æ€å¡«å…… -->
            </div>
        </div>

        <!-- ä¿éšœè¯¦æƒ… -->
        <div class="section" id="coverageSection">
            <h3 class="section-title">æ ¸å¿ƒä¿éšœæƒç›Š</h3>
            <div class="coverage-list" id="coverageList">
                <!-- åŠ¨æ€å¡«å…… -->
            </div>
        </div>

        <!-- è´¹ç‡/åˆ©ç›Šæ¼”ç¤º -->
        <div class="section" id="tableSection">
            <h3 class="section-title" id="tableTitle">æ•°æ®å‚è€ƒ</h3>
            <div style="background: #F9FAFB; border-radius: 8px; overflow: hidden;">
                <table class="dynamic-table" id="dynamicTable">
                    <!-- åŠ¨æ€å¡«å…… -->
                </table>
            </div>
        </div>

        <!-- è´£ä»»å…é™¤ -->
        <div class="section has-data">
            <h3 class="section-title">é‡è¦æç¤º</h3>
            <div class="exclusion-box">
                <strong>âš ï¸ è´£ä»»å…é™¤ / ç‰¹åˆ«çº¦å®š</strong>
                <ul id="exclusionList">
                    <!-- åŠ¨æ€å¡«å…… -->
                </ul>
            </div>
        </div>
    </div>

    <!-- åº•éƒ¨å¯¼èˆª -->
    <nav class="bottom-nav">
        <button class="btn btn-outline">ğŸ¤– AI é¡¾é—®</button>
        <button class="btn btn-primary">ğŸ“„ ç”Ÿæˆè®¡åˆ’ä¹¦</button>
    </nav>

    <script>
        /**
         * æ¨¡æ‹Ÿæ•°æ®åº“ä¸­çš„ JSON æ•°æ®ç»“æ„
         * åŒ…å«ï¼šåŸºç¡€å­—æ®µ + extend_info (UIæ‰©å±•å­—æ®µ)
         */
        const MOCK_DB_DATA = [
            {
                id: 1,
                // --- åŸºç¡€å­—æ®µ (insurance_product) ---
                product_name: "å‹é‚¦ä¼ ä¸–æ— å¿§é«˜ç«¯åŒ»ç–—ä¿é™©",
                product_type: "é«˜ç«¯åŒ»ç–—é™©",
                company_name: "å‹é‚¦äººå¯¿",
                description: "å…¨çƒé¡¶å°–åŒ»ç–—èµ„æºå°Šäº«ï¼Œåƒä¸‡ä¿é¢å®ˆæŠ¤å¥åº·ã€‚çªç ´ç¤¾ä¿é™åˆ¶ï¼Œç›´ä»˜æœåŠ¡æ— éœ€å«ä»˜ã€‚",
                tags: "é«˜ç«¯åŒ»ç–—,å…¨çƒä¿éšœ,ç›´ä»˜æœåŠ¡,ç™Œç—‡ç‰¹è¯",
                age_range: "0-70 å‘¨å²",
                insurance_period: "1 å¹´",
                payment_period: "å¹´äº¤",
                waiting_period: "30 å¤©",
                exclusions: "æ—¢å¾€ç—‡;æ•´å½¢ç¾å®¹;é—ä¼ æ€§ç–¾ç—…;æœªéµåŒ»å˜±ç”¨è¯",
                
                // --- æ‰©å±•å­—æ®µ (extend_info JSON) ---
                extend_info: {
                    theme_color: "#D31145", // å‹é‚¦çº¢
                    highlights: [
                        { label: "å¹´åº¦ä¿é¢", value: "800ä¸‡" },
                        { label: "å…èµ”é¢", value: "0å…ƒ" },
                        { label: "ä¿éšœåŒºåŸŸ", value: "å…¨çƒ" },
                        { label: "ç†èµ”æ–¹å¼", value: "ç›´ä»˜" }
                    ],
                    coverage_list: [
                        { icon: "ğŸ¥", title: "ä½é™¢åŒ»ç–—è´¹ç”¨", desc: "åŒ…å«åºŠä½è´¹ã€æ‰‹æœ¯è´¹ã€ICUç­‰", value: "å…¨é¢" },
                        { icon: "ğŸ’Š", title: "ç™Œç—‡æ²»ç–—è´¹ç”¨", desc: "åŒ–ç–—ã€æ”¾ç–—ã€é¶å‘ç–—æ³•", value: "å…¨é¢" },
                        { icon: "âœˆï¸", title: "ç´§æ€¥åŒ»ç–—æ•‘æ´", desc: "å…¨çƒåŒ»ç–—è½¬è¿ä¸é€è¿”", value: "100ä¸‡" }
                    ],
                    table_data: {
                        title: "è´¹ç‡å‚è€ƒ (0å…èµ”)",
                        headers: ["å¹´é¾„", "å¹´äº¤ä¿è´¹"],
                        rows: [
                            ["0-6å²", "Â¥12,888"],
                            ["30å²", "Â¥15,660"],
                            ["40å²", "Â¥19,800"]
                        ]
                    }
                }
            },
            {
                id: 2,
                product_name: "å‹é‚¦å…¨ä½‘å€è‡³é‡ç–¾é™©",
                product_type: "é‡å¤§ç–¾ç—…é™©",
                company_name: "å‹é‚¦äººå¯¿",
                description: "æä¾›å¤šé‡é‡ç–¾ä¿éšœï¼Œè¦†ç›–ç™Œç—‡å¤šæ¬¡èµ”ä»˜ï¼Œä¸ºæ‚¨å»ºç«‹åšå®çš„å¥åº·é˜²çº¿ã€‚",
                tags: "é‡ç–¾å¤šæ¬¡èµ”,ç™Œç—‡äºŒæ¬¡èµ”,èº«æ•…ä¿éšœ",
                age_range: "18-55 å‘¨å²",
                insurance_period: "ç»ˆèº«",
                payment_period: "19å¹´/29å¹´äº¤",
                waiting_period: "90 å¤©",
                exclusions: "å…ˆå¤©æ€§ç–¾ç—…;è‡ªæ€;çŠ¯ç½ªè¡Œä¸º",
                
                extend_info: {
                    theme_color: "#008B8B", // è¿™é‡Œçš„é¢œè‰²ä¸åŒ
                    highlights: [
                        { label: "é‡ç–¾ç§ç±»", value: "120ç§" },
                        { label: "è½»ç—‡ç§ç±»", value: "60ç§" },
                        { label: "èµ”ä»˜æ¬¡æ•°", value: "æœ€é«˜5æ¬¡" },
                        { label: "èº«æ•…èµ”ä»˜", value: "ä¿é¢" }
                    ],
                    coverage_list: [
                        { icon: "ğŸ¦ ", title: "é‡å¤§ç–¾ç—…ä¿é™©é‡‘", desc: "120ç§é‡ç–¾ï¼Œåˆ†ç»„å¤šæ¬¡èµ”ä»˜", value: "100%ä¿é¢" },
                        { icon: "ğŸ©º", title: "è½»ç—‡ç–¾ç—…ä¿é™©é‡‘", desc: "60ç§è½»ç—‡ï¼Œä¸åˆ†ç»„æ— é—´éš”", value: "20%ä¿é¢" },
                        { icon: "ğŸ’€", title: "èº«æ•…/å…¨æ®‹", desc: "18å²åèµ”ä»˜ä¿é¢", value: "100%ä¿é¢" }
                    ],
                    // é‡ç–¾é™©å¯èƒ½ä¸éœ€è¦è¡¨æ ¼ï¼Œæˆ–è€…å±•ç¤ºç°é‡‘ä»·å€¼ç¤ºä¾‹
                    table_data: null 
                }
            },
            {
                id: 3,
                product_name: "å‹é‚¦å……è£•æœªæ¥å¹´é‡‘ä¿é™©",
                product_type: "å¹´é‡‘ç†è´¢é™©",
                company_name: "å‹é‚¦äººå¯¿",
                description: "é•¿æœŸèµ„äº§è§„åˆ’é¦–é€‰ï¼Œä¸ºæ‚¨æä¾›ç¨³å®šçš„ç°é‡‘æµï¼ŒåŠ©åŠ›å…»è€ä¸å­å¥³æ•™è‚²ã€‚",
                tags: "è´¢å¯Œå¢å€¼,å…»è€è§„åˆ’,æ•™è‚²é‡‘",
                age_range: "0-60 å‘¨å²",
                insurance_period: "è‡³105å²",
                payment_period: "5å¹´/10å¹´äº¤",
                waiting_period: "æ— ",
                exclusions: "æŠ•ä¿äººå¯¹è¢«ä¿é™©äººçš„æ•…æ„æ€å®³;è¢«ä¿é™©äººä¸¤å¹´å†…è‡ªæ€",
                
                extend_info: {
                    theme_color: "#DAA520", // é‡‘è‰²
                    highlights: [
                        { label: "èµ·é¢†æ—¶é—´", value: "ç¬¬5å¹´" },
                        { label: "ä¿è¯é¢†å–", value: "20å¹´" },
                        { label: "å†…éƒ¨æ”¶ç›Šç‡", value: "3.5%+" }
                    ],
                    coverage_list: [
                        { icon: "ğŸ’°", title: "ç”Ÿå­˜å¹´é‡‘", desc: "ç¬¬5å¹´èµ·æ¯å¹´é¢†å–", value: "10%ä¿è´¹" },
                        { icon: "ğŸ", title: "æ»¡æœŸé‡‘", desc: "åˆåŒæœŸæ»¡ç»™ä»˜", value: "100%ä¿é¢" },
                        { icon: "ğŸ“ˆ", title: "åˆ†çº¢", desc: "æ ¹æ®å…¬å¸ç»è¥çŠ¶å†µåˆ†é…", value: "æµ®åŠ¨" }
                    ],
                    table_data: {
                        title: "åˆ©ç›Šæ¼”ç¤º (30å²ç”·/å¹´äº¤10ä¸‡)",
                        headers: ["ä¿å•å¹´åº¦", "ç´¯è®¡ä¿è´¹", "ç°é‡‘ä»·å€¼"],
                        rows: [
                            ["ç¬¬5å¹´", "50ä¸‡", "38ä¸‡"],
                            ["ç¬¬10å¹´", "100ä¸‡", "98ä¸‡"],
                            ["ç¬¬20å¹´", "100ä¸‡", "165ä¸‡"]
                        ]
                    }
                }
            }
        ];

        // --- æ ¸å¿ƒæ¸²æŸ“é€»è¾‘ ---

        function renderProduct(data) {
            const ext = data.extend_info || {};

            // 1. è®¾ç½®ä¸»é¢˜è‰²
            document.documentElement.style.setProperty('--primary-color', ext.theme_color || '#D31145');

            // 2. åŸºç¡€ä¿¡æ¯ç»‘å®š
            setText('productType', data.product_type);
            setText('productName', data.product_name);
            setText('companyName', data.company_name);
            setText('productDesc', data.description);

            // 3. æ ‡ç­¾
            // å¤„ç†å­—ç¬¦ä¸²åˆ—è¡¨æˆ–çº¯æ–‡æœ¬æ ¼å¼
            let tagItems = [];
            if (typeof data.tags === 'string') {
                if (data.tags.startsWith('[')) {
                    // It's a string representation of a list like "['tag1', 'tag2']"
                    try {
                        let cleaned = data.tags.replace(/'/g, '"');
                        tagItems = JSON.parse(cleaned);
                    } catch (e) {
                        const matches = data.tags.match(/'([^']+)'/g);
                        tagItems = matches ? matches.map(s => s.slice(1, -1)) : data.tags.split(/,|ï¼Œ| /);
                    }
                } else {
                    // Simple comma-separated text
                    tagItems = data.tags.split(/,|ï¼Œ| /);
                }
            } else if (Array.isArray(data.tags)) {
                tagItems = data.tags;
            }
            
            const tagsHtml = tagItems
                .filter(tag => tag && tag.trim())
                .map(tag => `<span class="info-tag">#${tag.trim()}</span>`)
                .join('');
            setHtml('tagsContainer', tagsHtml);

            // 4. å…³é”®æŒ‡æ ‡ (Highlights) - åŠ¨æ€ç”Ÿæˆå¡ç‰‡
            const highlightsHtml = (ext.highlights || []).map(h => `
                <div class="metric-card">
                    <div class="metric-value">${h.value}</div>
                    <div class="metric-label">${h.label}</div>
                </div>
            `).join('');
            setHtml('highlightsContainer', highlightsHtml);

            // 5. æŠ•ä¿è§„åˆ™
            const rules = [
                { k: 'æŠ•ä¿å¹´é¾„', v: data.age_range },
                { k: 'ä¿éšœæœŸé™', v: data.insurance_period },
                { k: 'ç¼´è´¹å¹´é™', v: data.payment_period, tip: 'éœ€è¦è¿ç»­äº¤çº³ä¿è´¹çš„å¹´æ•°' },
                { k: 'ç­‰å¾…æœŸ', v: data.waiting_period, tip: 'æŠ•ä¿åéœ€è¦ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œä¿éšœæ‰æ­£å¼ç”Ÿæ•ˆ' }
            ];
            const rulesHtml = rules.map(r => `
                <div class="rule-item">
                    <h4 style="display:flex; align-items:center;">
                        ${r.k} 
                        ${r.tip ? `
                        <div class="tooltip-container" onclick="void(0)">
                            <span class="tooltip-icon">?</span>
                            <span class="tooltip-text">${r.tip}</span>
                        </div>
                        ` : ''}
                    </h4>
                    <p>${r.v}</p>
                </div>
            `).join('');
            setHtml('rulesContainer', rulesHtml);

            // 6. æ ¸å¿ƒä¿éšœ (Coverage List)
            const coverageList = ext.coverage_list || [];
            const covSection = document.getElementById('coverageSection');
            if (coverageList.length > 0) {
                covSection.classList.add('has-data');
                const covHtml = coverageList.map(c => `
                    <div class="coverage-item">
                        <div class="coverage-icon" style="background-color: ${hexToRgba(ext.theme_color, 0.1)}; color:${ext.theme_color}">${c.icon || 'ğŸ›¡ï¸'}</div>
                        <div class="coverage-content">
                            <div class="coverage-title">${c.title}</div>
                            <div class="coverage-desc">${c.desc}</div>
                        </div>
                        <div class="coverage-amount" style="color:${ext.theme_color}">${c.value}</div>
                    </div>
                `).join('');
                setHtml('coverageList', covHtml);
            } else {
                covSection.classList.remove('has-data');
            }

            // 7. è¡¨æ ¼æ•°æ® (Table)
            const tableData = ext.table_data;
            const tableSection = document.getElementById('tableSection');
            if (tableData) {
                tableSection.classList.add('has-data');
                setText('tableTitle', tableData.title);
                
                let tableHtml = `<thead><tr>${tableData.headers.map(h => `<th>${h}</th>`).join('')}</tr></thead>`;
                tableHtml += `<tbody>${tableData.rows.map(row => `<tr>${row.map(cell => `<td>${cell}</td>`).join('')}</tr>`).join('')}</tbody>`;
                
                setHtml('dynamicTable', tableHtml);
            } else {
                tableSection.classList.remove('has-data');
            }

            // 8. è´£ä»»å…é™¤ (Exclusions)
            // å¤„ç†å­—ç¬¦ä¸²åˆ—è¡¨æˆ–çº¯æ–‡æœ¬æ ¼å¼
            let exclusionItems = [];
            if (typeof data.exclusions === 'string') {
                if (data.exclusions.startsWith('[')) {
                    // It's a string representation of a list like "['item1', 'item2']"
                    try {
                        // Clean up the string and parse it
                        let cleaned = data.exclusions.replace(/'/g, '"');
                        exclusionItems = JSON.parse(cleaned);
                    } catch (e) {
                        // Fallback: use regex to extract items
                        const matches = data.exclusions.match(/'([^']+)'/g);
                        exclusionItems = matches ? matches.map(s => s.slice(1, -1)) : [data.exclusions];
                    }
                } else {
                    // Simple semicolon-separated text
                    exclusionItems = data.exclusions.split(/;|ï¼›/);
                }
            } else if (Array.isArray(data.exclusions)) {
                exclusionItems = data.exclusions;
            }
            
            const excHtml = exclusionItems
                .filter(ex => ex && ex.trim())
                .map(ex => {
                    // Remove bullet points and extra whitespace
                    let cleaned = ex.replace(/^[â€¢Â·\s]+/, '').trim();
                    return `<li>${cleaned}</li>`;
                })
                .join('');
            setHtml('exclusionList', excHtml);
        }

        // --- å·¥å…·å‡½æ•° ---
        function setText(id, text) { document.getElementById(id).textContent = text; }
        function setHtml(id, html) { document.getElementById(id).innerHTML = html; }
        
        // ç®€å•çš„ Hex è½¬ RGBA ç”¨äºèƒŒæ™¯è‰²å˜æ·¡
        function hexToRgba(hex, alpha) {
            // è¿™é‡Œçš„å®ç°æ¯”è¾ƒç®€ç•¥ï¼Œä»…é€‚é… #RRGGBB æ ¼å¼
            let r = parseInt(hex.slice(1, 3), 16);
            let g = parseInt(hex.slice(3, 5), 16);
            let b = parseInt(hex.slice(5, 7), 16);
            return `rgba(${r},${g},${b},${alpha})`;
        }

        // --- åˆå§‹åŒ–é€»è¾‘ ---
        function init() {
            const nav = document.getElementById('navContainer');
            
            MOCK_DB_DATA.forEach((item, index) => {
                const btn = document.createElement('button');
                btn.className = `nav-btn ${index === 0 ? 'active' : ''}`;
                btn.textContent = item.product_name;
                btn.onclick = () => {
                    // åˆ‡æ¢ active æ ·å¼
                    document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    // æ¸²æŸ“æ•°æ®
                    renderProduct(item);
                };
                nav.appendChild(btn);
            });

            // é»˜è®¤æ¸²æŸ“ç¬¬ä¸€ä¸ª
            renderProduct(MOCK_DB_DATA[0]);
        }

        init();

    </script>
</body>
</html>
